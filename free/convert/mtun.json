{
  "log": {"disabled": false, "level": "error", "timestamp": true},
  "ntp": {"enabled": true, "server": "ntp.aliyun.com", "server_port": 123, "interval": "30m"},
  "dns": {
    "servers": [
      {"tag": "dns_resolver", "type": "udp", "server": "223.5.5.5", "server_port": 53, "detour": "D"},
      {"tag": "dns_proxy", "type": "https", "server": "cloudflare-dns.com", "server_port": 443, "domain_resolver": "dns_resolver", "detour": "A"},
      {"tag": "dns_google", "type": "https", "server": "dns.google", "server_port": 443, "domain_resolver": "dns_resolver", "detour": "Google"},
      {"tag": "dns_microsoft", "type": "https", "server": "cloudflare-dns.com", "server_port": 443, "domain_resolver": "dns_resolver", "detour": "Microsoft"},
      {"tag": "dns_direct", "type": "https", "server": "dns.alidns.com", "server_port": 443, "domain_resolver": "dns_resolver", "detour": "D"}
    ],
    "rules": [
      {"domain": ["ntp.aliyun.com"], "strategy": "ipv4_only", "server": "dns_direct"},
      {"domain_keyword": ["msftconnecttest.com", "msftncsi.com"], "strategy": "ipv4_only", "server": "dns_microsoft"},
      {"domain_keyword": "googleapis", "strategy": "ipv4_only", "server": "dns_google"},
      {"rule_set": "googlefcm-site", "strategy": "ipv4_only", "server": "dns_google"},
      {"rule_set": "ad-site", "action": "reject"},
      {"rule_set": "cn-site", "strategy": "ipv4_only", "server": "dns_direct"}
    ],
    "final": "dns_proxy",
    "strategy": "ipv4_only",
    "disable_cache": true
  },
  "inbounds": [{"type": "tun", "tag": "tun-in", "interface_name": "sing-box", "address": ["172.18.0.1/30"], "auto_route": true, "strict_route": true, "stack": "system", "mtu": 9000, "endpoint_independent_nat": true, "udp_timeout": "5m", "platform": {"http_proxy": {"enabled": true, "server": "127.0.0.1", "server_port": 12138}}}],
  "outbounds": [
    {"tag": "D", "type": "direct", "domain_resolver": "dns_direct"},
    {"tag": "R", "type": "block"},
    {"tag": "Default", "type": "selector", "outbounds": ["A", "R", "D"], "default": "A"},
    {"tag": "A", "type": "selector", "outbounds": ["SG-UDP", "SG-TCP", "JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "HK-UDP", "HK-TCP"], "default": "SG-UDP"},
    {"tag": "Google", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "SG-UDP", "SG-TCP", "HK-UDP", "HK-TCP"], "default": "JP-UDP"},
    {"tag": "OpenAi", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "SG-UDP", "SG-TCP", "HK-UDP", "HK-TCP"], "default": "JP-UDP"},
    {"tag": "Steam", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "SG-UDP", "SG-TCP", "HK-UDP", "HK-TCP"], "default": "JP-UDP"},
    {"tag": "Telegram", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "SG-UDP", "SG-TCP", "HK-UDP", "HK-TCP"], "default": "JP-UDP"},
    {"tag": "Netflix", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "SG-UDP", "SG-TCP", "HK-UDP", "HK-TCP"], "default": "JP-UDP"},
    {"tag": "PikPak", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "SG-UDP", "SG-TCP", "HK-UDP", "HK-TCP"], "default": "JP-UDP"},
    {"tag": "GitHub", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "SG-UDP", "SG-TCP", "HK-UDP", "HK-TCP"], "default": "JP-UDP"},
    {"tag": "Microsoft", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP", "US-TCP", "US-UDP", "SG-UDP", "SG-TCP", "HK-UDP", "HK-TCP", "D"], "default": "JP-UDP"},
    {"tag": "TikTok", "type": "selector", "outbounds": ["JP-TCP", "JP-UDP"], "default": "JP-UDP"},
    {"tag": "Twitter", "type": "selector", "outbounds": ["US-TCP", "US-UDP", "JP-UDP", "JP-TCP", "SG-UDP", "SG-TCP"], "default": "US-UDP"},
    {"tag": "HK-TCP", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "120s", "tolerance": 300, "filter": [{"action": "match", "regex": ["(?i)^(?=.*(HK))(?!.*(UDP|HY2)).*$"]}]},
    {"tag": "SG-TCP", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "120s", "tolerance": 300, "filter": [{"action": "match", "regex": ["(?i)^(?=.*(SG))(?!.*(UDP|HY2)).*$"]}]},
    {"tag": "JP-TCP", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "120s", "tolerance": 300, "filter": [{"action": "match", "regex": ["(?i)^(?=.*(JP))(?!.*(UDP|HY2)).*$"]}]},
    {"tag": "US-TCP", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "120s", "tolerance": 300, "filter": [{"action": "match", "regex": ["(?i)^(?=.*(US))(?!.*(UDP|HY2)).*$"]}]},
    {"tag": "HK-UDP", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "120s", "tolerance": 300, "filter": [{"action": "match", "regex": ["(?i)^(?=.*(HK))(?=.*(-UDP|-HY2))(?!.*(小众)).*$"]}]},
    {"tag": "SG-UDP", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "120s", "tolerance": 300, "filter": [{"action": "match", "regex": ["(?i)^(?=.*(SG))(?=.*(-UDP|-HY2))(?!.*(小众)).*$"]}]},
    {"tag": "JP-UDP", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "120s", "tolerance": 300, "filter": [{"action": "match", "regex": ["(?i)^(?=.*(JP))(?=.*(-UDP|-HY2))(?!.*(小众)).*$"]}]},
    {"tag": "US-UDP", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "120s", "tolerance": 300, "filter": [{"action": "match", "regex": ["(?i)^(?=.*(US))(?=.*(-UDP|-HY2))(?!.*(小众)).*$"]}]}
  ],

  "route": {
    "rules": [
      {"inbound": ["tun-in"], "action": "sniff", "timeout": "300ms"},
      {"ip_cidr": "223.5.5.5", "outbound": "D"},
      {"port": 853, "action": "reject", "no_drop": true},
      {"port": 53, "action": "hijack-dns"},
      {"protocol": "dns", "action": "hijack-dns"},
      {"type": "logical", "mode": "and", "rules": [{"network": ["udp"]}, {"port": [443]}], "action": "reject", "no_drop": true},
      {"rule_set": "ad-site", "action": "reject"},
      {"rule_set": "ad-ip", "action": "reject"},
      {"rule_set": "huawei-direct-site", "outbound": "D"},
      {"rule_set": "huawei-site", "action": "reject"},
      {"rule_set": "huawei-ip", "action": "reject"},
      {"rule_set": "mobile", "outbound": "D"},
      {"domain": ["cdn.jsdmirror.com", "ntp.aliyun.com"], "outbound": "D"},
      {"domain_keyword": ["msftconnecttest.com", "msftncsi.com"], "outbound": "Microsoft"},
      {"domain_keyword": "googleapis", "outbound": "Google"},
      {"rule_set": "direct-site", "outbound": "D"},
      {"rule_set": "cloudflare-site", "outbound": "A"},
      {"rule_set": "proxy-site", "outbound": "A"},
      {"rule_set": "openai-site", "outbound": "OpenAi"},
      {"rule_set": "pikpak-site", "outbound": "PikPak"},
      {"rule_set": "javdb-site", "outbound": "A"},
      {"rule_set": "speedtest-site", "outbound": "A"},
      {"rule_set": "fdroid-site", "outbound": "A"},
      {"rule_set": "apkpure-site", "outbound": "A"},
      {"rule_set": "adguard-site", "outbound": "A"},
      {"rule_set": "spotify-site", "outbound": "A"},
      {"rule_set": "jd-site", "outbound": "D"},
      {"rule_set": "steam-site", "outbound": "Steam"},
      {"rule_set": "youtube-site", "outbound": "Google"},
      {"rule_set": "tiktok-site", "outbound": "TikTok"},
      {"rule_set": "github-site", "outbound": "GitHub"},
      {"rule_set": "mozilla-site", "outbound": "A"},
      {"rule_set": "wikimedia-site", "outbound": "A"},
      {"rule_set": "googlefcm-site", "outbound": "D"},
      {"rule_set": "telegram-site", "outbound": "Telegram"},
      {"rule_set": "twitter-site", "outbound": "Twitter"},
      {"rule_set": "netflix-site", "outbound": "Netflix"},
      {"rule_set": "google-site", "outbound": "Google"},
      {"rule_set": "alibaba-site", "outbound": "D"},
      {"rule_set": "tencent-site", "outbound": "D"},
      {"rule_set": "microsoft-site", "outbound": "Microsoft"},
      {"rule_set": "gfw-site", "outbound": "A"},
      {"rule_set": "cn-site", "outbound": "D"},
      {"rule_set": "direct-ip", "outbound": "D"},
      {"rule_set": "local-ip", "outbound": "D"},
      {"rule_set": "github-ip", "outbound": "GitHub"},
      {"rule_set": "wechat-ip", "outbound": "D"},
      {"rule_set": "cloudflare-ip", "outbound": "A"},
      {"rule_set": "pikpak-ip", "outbound": "PikPak"},
      {"rule_set": "alibaba-ip", "outbound": "D"},
      {"rule_set": "netflix-ip", "outbound": "Netflix"},
      {"rule_set": "twitter-ip", "outbound": "Twitter"},
      {"rule_set": "telegram-ip", "outbound": "Telegram"},
      {"rule_set": "google-ip", "outbound": "Google"},
      {"rule_set": "cn-ip", "outbound": "D"}
    ],
    "rule_set": [
      {"tag": "ad-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/ad/ad-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "ad-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/ad/ad-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "adguard-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/adguard.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "alibaba-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/alibaba/alibaba-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "alibaba-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/alibaba/alibaba-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "apkpure-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/apkpure.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "cn-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/cn/cn-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "cn-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/cn/cn-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "cloudflare-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/cloudflare.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "cloudflare-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/cloudflare.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "direct-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/direct/direct-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "direct-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/direct/direct-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "fdroid-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/f-droid.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "gfw-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/gfw/gfw-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "github-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/github.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "github-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/github/github-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "google-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/google.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "google-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/google.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "googlefcm-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/googlefcm.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "huawei-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/huawei/huawei-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "huawei-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/huawei/huawei-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "huawei-direct-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/huawei/huawei-direct-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "javdb-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/javdb.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "jd-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/jd.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "local-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/local/local-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "microsoft-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/microsoft.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "mobile", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/mobile/mobile.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "mozilla-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/mozilla.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "netflix-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/netflix.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "netflix-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/netflix.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "openai-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/openai.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "pikpak-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/pikpak/pikpak-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "pikpak-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/pikpak/pikpak-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "proxy-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/proxy/proxy-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "speedtest-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/speedtest/speedtest-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "spotify-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/spotify.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "steam-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/steam/steam-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "tencent-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/tencent.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "telegram-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/telegram/telegram-site.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "telegram-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/telegram/telegram-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "tiktok-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/tiktok.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "twitter-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/twitter.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "twitter-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/twitter.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "wikimedia-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/wikimedia.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "wechat-ip", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/yljos/rule-set@main/sing-box/wechat/wechat-ip.srs", "download_detour": "D", "update_interval": "12h0m0s"},
      {"tag": "youtube-site", "type": "remote", "url": "https://cdn.jsdmirror.com/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/youtube.srs", "download_detour": "D", "update_interval": "12h0m0s"}
    ],
    "final": "Default",
    "auto_detect_interface": true,
    "default_domain_resolver": {"server": "dns_direct", "rewrite_ttl": 10}
  },
  "experimental": {
    "cache_file": {"enabled": true, "path": "cache.db", "store_rdrc": true, "rdrc_timeout": "168h0m0s"}
  }
}
